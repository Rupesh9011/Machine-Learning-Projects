
---INVENTORY STRUCTURE

CREATE DATABASE INVENTORY

USE INVENTORY

CREATE TABLE SUPPLIER
(SID CHAR(5) PRIMARY KEY,
SNAME VARCHAR (50) NOT NULL,
SADD VARCHAR (50) NOT NULL,
SCITY CHAR(15) DEFAULT 'DELHI',
SPHONE VARCHAR(15) UNIQUE,
EMAIL VARCHAR(50));

SELECT * FROM SUPPLIER

INSERT INTO SUPPLIER
VALUES('S0001','MONIKA ARORA','B1/45,JANAKPURI','DELHI','999999234','MA@GMAIL.COM')

INSERT INTO SUPPLIER
VALUES('S0002','ROHAN KUMAR','B305,RAJOURI GARDEN','DELHI','9811098110','RK@GMAIL.COM')

INSERT INTO SUPPLIER
VALUES('S0003','RAJAT KUMAR','HNO-B205,SECTOR 62','DELHI','9811098115','RAJATK@GMAIL.COM')

INSERT INTO SUPPLIER
VALUES('S0004','ABHISHEK SHARMA','C2-101,JANAKPURI','DELHI','9898989800','AB@GMAIL.COM')

INSERT INTO SUPPLIER
VALUES('S0005','RAJAT KAPOOR','B501/1 POCKET 1,JANAKPURI','DELHI','9899256570','RJT@YAHOO.COM')

INSERT INTO SUPPLIER
VALUES('S0006','Rohan Kumar','B-256,RAJOURIGARDEN','DELHI','9898999987','RKUMAR@GMAIL.COM')

INSERT INTO SUPPLIER
VALUES('S0007','Lalit Sharma','C2-401,Janak Puri','DELHI','9898999989','ls@GMAIL.COM')

INSERT INTO SUPPLIER
VALUES('S0008','Monika Bajaj','DLF,Phase 5','DELHI','9898101089','MBAJAJ@GMAIL.COM')

INSERT INTO SUPPLIER
VALUES('S0009','Devender Kapoor','E102/3 Pocket 1 Sector 3,Dwarka','Delhi','9899346907','dk@yahoo.com')

INSERT INTO SUPPLIER
VALUES('S0010','Ravinder Kumar','B302-Jay Maa Apt,Dwarka','Delhi','9899768756','rk@yahoo.com')


SELECT * FROM SUPPLIER


CREATE TABLE PRODUCT
(PID CHAR(5) PRIMARY KEY,
PDESC VARCHAR(50) NOT NULL,
PRICE INT,
CATEGORY VARCHAR(10),
SID CHAR(5))

ALTER TABLE PRODUCT
ADD CONSTRAINT CK1 CHECK(PRICE>0);

ALTER TABLE PRODUCT
ADD CONSTRAINT CK2 CHECK (CATEGORY IN ('IT','HA','HC'))

ALTER TABLE PRODUCT
ADD CONSTRAINT FKID FOREIGN KEY (SID) REFERENCES SUPPLIER (SID)

INSERT INTO PRODUCT
VALUES('P0001','SPEAKER',1500,'IT','S0001')

INSERT INTO PRODUCT
VALUES('P0002','KEYBOARD',1000,'IT','S0001')

INSERT INTO PRODUCT
VALUES('P0003','HEADPHONE',1300,'IT','S0002')

INSERT INTO PRODUCT
VALUES('P0004','LAPTOP',150000,'IT','S0002')

INSERT INTO PRODUCT
VALUES('P0005','LAPTOP CHARGER',2000,'IT','S0003')

INSERT INTO PRODUCT
VALUES('P0006','LAN CABLE',500,'IT','S0003')

INSERT INTO PRODUCT
VALUES('P0007','PENDRIVE',700,'IT','S0001')

INSERT INTO PRODUCT
VALUES('P0008','ELECTIC INDUCTON',3500,'HA','S0004')

INSERT INTO PRODUCT
VALUES('P0009','ELECTRIC PRESSURE COOKER',6000,'HA','S0004')

INSERT INTO PRODUCT
VALUES('P0010','MIXER GRINDER',1300,'HA','S0005')

INSERT INTO PRODUCT
VALUES('P0011','DRY IRON',800,'HA','S0005')

INSERT INTO PRODUCT
VALUES('P0012','OVEN',5000,'HA','S0006')

INSERT INTO PRODUCT
VALUES('P0013','WATER PURIFIER',15000,'HA','S0006')

INSERT INTO PRODUCT
VALUES('P0014','COOKWARE SET',1300,'HA','S0006')

INSERT INTO PRODUCT
VALUES('P0015','FREEZ',12000,'HA','S0005')

INSERT INTO PRODUCT
VALUES('P0016','DINNER SET',1300,'HC','S0007')

INSERT INTO PRODUCT
VALUES('P0017','STEEL SNACK PLATES SET',900,'HC','S0007')

INSERT INTO PRODUCT
VALUES('P0018','SERVING BOWL SET',1100,'HC','S0008')

INSERT INTO PRODUCT
VALUES('P0019','KITECHEN CUTLERY',550,'HC','S0009')

INSERT INTO PRODUCT
VALUES('P0020','WATER STORAGE TANK',2500,'HC','S0010')

SELECT * FROM PRODUCT



CREATE TABLE STOCK
(PID CHAR(5),
SQTY INT,
ROL INT,
MOQ INT)

ALTER TABLE STOCK
ADD CONSTRAINT FKID1 FOREIGN KEY(PID) REFERENCES PRODUCT (PID)

ALTER TABLE STOCK
ADD CONSTRAINT CK3 CHECK(SQTY >= 0)

ALTER TABLE STOCK
ADD CONSTRAINT CK4 CHECK(ROL>0)

ALTER TABLE STOCK
ADD CONSTRAINT CK5 CHECK (MOQ>=5)


INSERT INTO STOCK
VALUES('P0001',50,5,10)

INSERT INTO STOCK
VALUES('P0002',50,5,10)

INSERT INTO STOCK
VALUES('P0007',100,10,15)

INSERT INTO STOCK
VALUES('P0008',10,5,5)

INSERT INTO STOCK
VALUES('P0011',30,6,15)

INSERT INTO STOCK
VALUES('P00010',20,5,8)

INSERT INTO STOCK
VALUES('P00013',10,5,5)

INSERT INTO STOCK
VALUES('P0016',30,10,15)

INSERT INTO STOCK
VALUES('P0017',20,10,10)

INSERT INTO STOCK
VALUES('P0018',30,5,8)

INSERT INTO STOCK
VALUES('P020',20,5,5)

SELECT * FROM STOCK

CREATE TABLE CUST
(CID CHAR(5),
CNAME VARCHAR(30) NOT NULL,
ADDRESS VARCHAR(50) NOT NULL,
CITY VARCHAR(20) NOT NULL,
PHONE CHAR(15) NOT NULL,
EMAIL VARCHAR(20)NOT NULL,
DOB DATE)

ALTER TABLE CUST
ALTER COLUMN CID CHAR(5) NOT NULL

ALTER TABLE CUST
ADD CONSTRAINT PK1 PRIMARY KEY (CID)

ALTER TABLE CUST
ADD CONSTRAINT CK6 CHECK(DOB < '1-JAN-2000')

SELECT * FROM CUST

INSERT INTO CUST
VALUES('C0001','RAMESH GUPTA','SECTOR 7,Rohini','Gurgaon','9999002727','RK@YAHOO.COM','1990-09-01')

INSERT INTO CUST
VALUES('C0002','Sandeep Sharma','SECTOR 2,PALAM','Gurgaon','9567890010','SAM1@YAHOO.COM','1995-09-15')

INSERT INTO CUST
VALUES('C0003','Rajesh Sharma','Sector 11,Dwarka','Delhi','9999001001','RSharma56@gmail.com','1998-03-16')

INSERT INTO CUST
VALUES('C0004','Manoj Kumar','B320,Janakpuri','Delhi','9999912399','mKumar@gmail.com','1985-07-01')

INSERT INTO CUST
VALUES('C0005','Yogeshwar Sharma','Sector 11,Dwarka','Delhi','8899001001','YSharma@gmail.com','1989-09-25')

INSERT INTO CUST
VALUES('C0006','Rohit Gupta','A32/620 Main Road,Sector 56','Noida','8899001123','rgupta@gmail.com','1992-03-31')

INSERT INTO CUST
VALUES('C0007','Kapil Sharma','Jay Maa Apartments Flat 32,Sector 72','Gurgaon','9999001099','kSharma@gmail.com','1987-09-28')

INSERT INTO CUST
VALUES('C0008','Archna Sharma','5C Karanpur,NP Road','Dehradun','9899249700','ASharma@gmail.com','1985-05-10')

INSERT INTO CUST
VALUES('C0009','Ranjeeta Goyal','Flat No 6A,Rajpur Road','Dehradun','9999002700','rgoyal@gmail.com','1989-12-31')

INSERT INTO CUST
VALUES('C0010','Komal Singh','Sector 64,Old Gurgaon Road','Gurgaon','7285912349','ksing@gmail.com','1990-03-31')



CREATE TABLE ORDERS
(OID CHAR(5),
ODATE DATE,
PID CHAR(5),
CID CHAR(5),
OQTY NUMERIC)

ALTER TABLE ORDERS
ADD CONSTRAINT FKPID FOREIGN KEY (PID) REFERENCES PRODUCT (PID)

ALTER TABLE ORDERS
ADD CONSTRAINT FKCID FOREIGN KEY(CID) REFERENCES CUST(CID)

ALTER TABLE ORDERS
ADD CONSTRAINT CK7 CHECK (OQTY>=1)

INSERT INTO ORDERS
VALUES('O0001','2023-05-12','P0001','C0001',3)

INSERT INTO ORDERS
VALUES('O0002','2023-04-15','P0007','C0002',2)

INSERT INTO ORDERS
VALUES('O0003','2023-04-28','P0011','C0005',1)

INSERT INTO ORDERS
VALUES('O0004','2023-05-01','P0016','C0008',2)

INSERT INTO ORDERS
VALUES('O0005','2023-05-05','P0019','C0010',3)



SELECT * FROM CUST
SELECT * FROM PRODUCT
SELECT * FROM SUPPLIER
SELECT* FROM ORDERS

/*DISPLAY :
1) PID, PDESC, CATEGORY, SNAME, SCITY*/

SELECT PRODUCT.PID,PRODUCT.PDESC,PRODUCT.CATEGORY,SUPPLIER.NAME,SUPPLIER.SCITY
FROM PRODUCT
INNER JOIN SUPPLIER
ON PRODUCT.SID=SUPPLIER.SID

/*2 ) OID , ODATE , CNAME, CADDRESS, CPHONE, PDESC, PRICE,OQTY, AMT*/

SELECT ORDERS.OID,ORDERS.ODATE,CUST.CNAME,CUST.ADDRESS, PHONE,PRODUCT.PDESC,PRODUCT.PRICE,ORDERS.OQTY,(PRODUCT.PRICE*ORDERS.OQTY) AS AMOUNT
FROM ORDERS
INNER JOIN PRODUCT
ON ORDERS.PID=PRODUCT.PID
INNER JOIN CUST
ON ORDERS.CID=CUST.CID

/*IN THE INVENTORY STRUCTURE GENERATE A VIEW BILL. IT SHOULD DISPLAY
OID,ODATE,CNAME,ADDRESS,PHONE,PDESC, PRICE, OQTY, AMOUNT */

CREATE VIEW BILL
AS
SELECT ORDERS.OID,ORDERS.ODATE,ORDERS.OQTY,CUST.CNAME,CUST.ADDRESS,CUST.PHONE,PRODUCT.PRICE,(PRODUCT.PRICE*ORDERS.OQTY) AS AMOUNT
FROM ORDERS
INNER JOIN PRODUCT
ON ORDERS.PID=PRODUCT.PID
INNER JOIN CUST
ON ORDERS.CID=CUST.CID

SELECT * FROM BILL

